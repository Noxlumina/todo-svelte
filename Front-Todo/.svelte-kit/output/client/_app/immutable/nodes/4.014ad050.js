import{s as se,h as X,j as le,o as de,r as ue}from"../chunks/scheduler.2e35c748.js";import{S as me,i as ce,g as v,s as T,e as Z,h as p,B as W,c as L,j as I,f,k as b,a as M,y as h,C as ee,z as H,A as he,m as V,n as z,x as B,o as U}from"../chunks/index.2b2d73f1.js";import{e as te}from"../chunks/each.e59479a4.js";import{g as fe}from"../chunks/navigation.9a3e5d8a.js";import{b as q,a as J,c as ve,d as N,f as pe}from"../chunks/index.01e535c7.js";var _e={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},be=function(e,o,t){var r,l=_e[e];return typeof l=="string"?r=l:o===1?r=l.one:r=l.other.replace("{{count}}",String(o)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dans "+r:"il y a "+r:r};const ye=be;var we={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},ge={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},De={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ce={date:q({formats:we,defaultWidth:"full"}),time:q({formats:ge,defaultWidth:"full"}),dateTime:q({formats:De,defaultWidth:"full"})};const ke=Ce;var Me={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Pe=function(e,o,t,r){return Me[e]};const je=Pe;var Te={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Le={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Ee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Ie={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},We={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Je=function(e,o){var t=Number(e),r=o==null?void 0:o.unit;if(t===0)return"0";var l=["year","week","hour","minute","second"],i;return t===1?i=r&&l.includes(r)?"ère":"er":i="ème",t+i},Ne={ordinalNumber:Je,era:J({values:Te,defaultWidth:"wide"}),quarter:J({values:Le,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:J({values:Ee,defaultWidth:"wide"}),day:J({values:Ie,defaultWidth:"wide"}),dayPeriod:J({values:We,defaultWidth:"wide"})};const He=Ne;var xe=/^(\d+)(ième|ère|ème|er|e)?/i,Ve=/\d+/i,ze={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Be={any:[/^av/i,/^ap/i]},Fe={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},Oe={any:[/1/i,/2/i,/3/i,/4/i]},Se={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Ue={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},qe={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Xe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Ae={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},Re={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Ye={ordinalNumber:ve({matchPattern:xe,parsePattern:Ve,valueCallback:function(e){return parseInt(e)}}),era:N({matchPatterns:ze,defaultMatchWidth:"wide",parsePatterns:Be,defaultParseWidth:"any"}),quarter:N({matchPatterns:Fe,defaultMatchWidth:"wide",parsePatterns:Oe,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:N({matchPatterns:Se,defaultMatchWidth:"wide",parsePatterns:Ue,defaultParseWidth:"any"}),day:N({matchPatterns:qe,defaultMatchWidth:"wide",parsePatterns:Xe,defaultParseWidth:"any"}),dayPeriod:N({matchPatterns:Ae,defaultMatchWidth:"any",parsePatterns:Re,defaultParseWidth:"any"})};const Qe=Ye;var $e={code:"fr",formatDistance:ye,formatLong:ke,formatRelative:je,localize:He,match:Qe,options:{weekStartsOn:1,firstWeekContainsDate:4}};const Ge=$e;function ae(a,e,o){const t=a.slice();return t[15]=e[o],t}function Ke(a){let e,o="Chargement en cours";return{c(){e=v("p"),e.textContent=o},l(t){e=p(t,"P",{"data-svelte-h":!0}),W(e)!=="svelte-k5kqlx"&&(e.textContent=o)},m(t,r){M(t,e,r)},p:X,d(t){t&&f(e)}}}function Ze(a){let e,o=te(a[2]),t=[];for(let r=0;r<o.length;r+=1)t[r]=re(ae(a,o,r));return{c(){e=v("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=p(r,"DIV",{class:!0});var l=I(e);for(let i=0;i<t.length;i+=1)t[i].l(l);l.forEach(f),this.h()},h(){b(e,"class","todo-list svelte-1xc62g9")},m(r,l){M(r,e,l);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(r,l){if(l&124){o=te(r[2]);let i;for(i=0;i<o.length;i+=1){const m=ae(r,o,i);t[i]?t[i].p(m,l):(t[i]=re(m),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=o.length}},d(r){r&&f(e),he(t,r)}}}function et(a){let e,o="Done",t,r;function l(){return a[11](a[15])}return{c(){e=v("button"),e.textContent=o,this.h()},l(i){e=p(i,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-ige5mi"&&(e.textContent=o),this.h()},h(){b(e,"class","svelte-1xc62g9")},m(i,m){M(i,e,m),t||(r=H(e,"click",l),t=!0)},p(i,m){a=i},d(i){i&&f(e),t=!1,r()}}}function tt(a){let e,o="Undone",t,r;function l(){return a[10](a[15])}return{c(){e=v("button"),e.textContent=o,this.h()},l(i){e=p(i,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-77oywd"&&(e.textContent=o),this.h()},h(){b(e,"class","svelte-1xc62g9")},m(i,m){M(i,e,m),t||(r=H(e,"click",l),t=!0)},p(i,m){a=i},d(i){i&&f(e),t=!1,r()}}}function re(a){let e,o,t=a[15].Name+"",r,l,i,m=a[15].Description+"",y,u,_,w,g=a[3](a[15].LimitDate)+"",P,E,D,n,s="Voir le détail",c,C,Y="Delete",F,O,Q;function $(j,d){return j[15].IsDone?tt:et}let x=$(a),k=x(a);function ne(){return a[12](a[15])}function oe(){return a[13](a[15])}return{c(){e=v("div"),o=v("h2"),r=V(t),l=T(),i=v("p"),y=V(m),u=T(),_=v("p"),w=V("à faire avant le "),P=V(g),E=T(),k.c(),D=T(),n=v("button"),n.textContent=s,c=T(),C=v("button"),C.textContent=Y,F=T(),this.h()},l(j){e=p(j,"DIV",{class:!0});var d=I(e);o=p(d,"H2",{class:!0});var G=I(o);r=z(G,t),G.forEach(f),l=L(d),i=p(d,"P",{});var K=I(i);y=z(K,m),K.forEach(f),u=L(d),_=p(d,"P",{});var S=I(_);w=z(S,"à faire avant le "),P=z(S,g),S.forEach(f),E=L(d),k.l(d),D=L(d),n=p(d,"BUTTON",{class:!0,"data-svelte-h":!0}),W(n)!=="svelte-i76m8k"&&(n.textContent=s),c=L(d),C=p(d,"BUTTON",{class:!0,"data-svelte-h":!0}),W(C)!=="svelte-1sm63jq"&&(C.textContent=Y),F=L(d),d.forEach(f),this.h()},h(){b(o,"class","todo-title svelte-1xc62g9"),b(n,"class","svelte-1xc62g9"),b(C,"class","svelte-1xc62g9"),b(e,"class","todo-card svelte-1xc62g9"),B(e,"isdone",a[15].IsDone),B(e,"notdone",!a[15].IsDone&&ie(a[15].LimitDate))},m(j,d){M(j,e,d),h(e,o),h(o,r),h(e,l),h(e,i),h(i,y),h(e,u),h(e,_),h(_,w),h(_,P),h(e,E),k.m(e,null),h(e,D),h(e,n),h(e,c),h(e,C),h(e,F),O||(Q=[H(n,"click",ne),H(C,"click",oe)],O=!0)},p(j,d){a=j,d&4&&t!==(t=a[15].Name+"")&&U(r,t),d&4&&m!==(m=a[15].Description+"")&&U(y,m),d&4&&g!==(g=a[3](a[15].LimitDate)+"")&&U(P,g),x===(x=$(a))&&k?k.p(a,d):(k.d(1),k=x(a),k&&(k.c(),k.m(e,D))),d&4&&B(e,"isdone",a[15].IsDone),d&4&&B(e,"notdone",!a[15].IsDone&&ie(a[15].LimitDate))},d(j){j&&f(e),k.d(),O=!1,ue(Q)}}}function at(a){let e,o="<h1>Mes todos</h1>",t,r,l,i='<label for="filter-input">Filter:</label>',m,y,u,_,w,g,P;function E(s,c){return s[0].length>0?Ze:Ke}let D=E(a),n=D(a);return{c(){e=v("div"),e.innerHTML=o,t=T(),r=v("div"),l=v("div"),l.innerHTML=i,m=T(),y=v("div"),u=v("input"),_=T(),n.c(),w=Z(),this.h()},l(s){e=p(s,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-hz3vjk"&&(e.innerHTML=o),t=L(s),r=p(s,"DIV",{class:!0});var c=I(r);l=p(c,"DIV",{class:!0,"data-svelte-h":!0}),W(l)!=="svelte-15pyzv"&&(l.innerHTML=i),m=L(c),y=p(c,"DIV",{});var C=I(y);u=p(C,"INPUT",{id:!0,"data-testid":!0,class:!0,placeholder:!0}),C.forEach(f),c.forEach(f),_=L(s),n.l(s),w=Z(),this.h()},h(){b(e,"class","title svelte-1xc62g9"),b(l,"class","label svelte-1xc62g9"),b(u,"id","filter-input"),b(u,"data-testid","filter"),b(u,"class","input-field svelte-1xc62g9"),b(u,"placeholder","Filter by name, description, or limit date"),b(r,"class","formgroup svelte-1xc62g9")},m(s,c){M(s,e,c),M(s,t,c),M(s,r,c),h(r,l),h(r,m),h(r,y),h(y,u),ee(u,a[1]),M(s,_,c),n.m(s,c),M(s,w,c),g||(P=H(u,"input",a[9]),g=!0)},p(s,[c]){c&2&&u.value!==s[1]&&ee(u,s[1]),D===(D=E(s))&&n?n.p(s,c):(n.d(1),n=D(s),n&&(n.c(),n.m(w.parentNode,w)))},i:X,o:X,d(s){s&&(f(e),f(t),f(r),f(_),f(w)),n.d(s),g=!1,P()}}}function ie(a){const e=new Date,o=new Date(a);return e>o}async function A(a){try{if(!(await fetch(`https://localhost:3000/todos/${a}`,{method:"DELETE"})).ok)throw new Error("Erreur lors de la suppression de la tâche")}catch(e){throw console.error("Erreur lors de la suppression de la tâche :",e),e}}async function R(a,e){try{const o=await fetch(`https://localhost:3000/todos/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok)throw new Error("Erreur lors de la mise à jour de la tâche");return await o}catch(o){throw console.error("Erreur lors de la mise à jour de la tâche :",o),o}}function rt(a,e,o){let{todos:t=[]}=e;function r(n){let s=new Date(n);return pe(s,"d MMMM yyyy",{locale:Ge})}let l=async function(){try{const c=await(await fetch("https://localhost:3000/todos")).json();o(0,t=c)}catch(s){console.error("Erreur lors de la récupération des todos :",s)}};async function i(n){try{const s={name:n.Name,description:n.Description,limitDate:n.LimitDate,isDone:!n.IsDone};await R(n.Id,s),l()}catch(s){console.error("Error while updating todo:",s)}}async function m(n){try{await A(n),l()}catch(s){console.error("Error while deleting todo:",s)}}function y(n){fe(`/todo/detail/${n.Id}`)}le(()=>{l()}),de(()=>{l()});let u="",_;function w(){u=this.value,o(1,u)}const g=n=>i(n),P=n=>i(n),E=n=>y(n),D=n=>m(n.Id);return a.$$set=n=>{"todos"in n&&o(0,t=n.todos)},a.$$.update=()=>{a.$$.dirty&3&&o(2,_=t.filter(n=>n.Name.toLowerCase().includes(u.toLowerCase())||n.Description.toLowerCase().includes(u.toLowerCase())||n.LimitDate.toLowerCase().includes(u.toLowerCase())).sort((n,s)=>new Date(n.LimitDate)-new Date(s.LimitDate)))},[t,u,_,r,i,m,y,A,R,w,g,P,E,D]}class dt extends me{constructor(e){super(),ce(this,e,rt,at,se,{todos:0,deleteTodoById:7,updateTodoById:8})}get deleteTodoById(){return A}get updateTodoById(){return R}}export{dt as component};
