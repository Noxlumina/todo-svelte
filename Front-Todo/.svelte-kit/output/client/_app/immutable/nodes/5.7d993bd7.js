import{s as Q,h as V,r as $,o as ee}from"../chunks/scheduler.2e35c748.js";import{S as te,i as re,g as h,s as I,h as D,B as j,c as b,j as U,f as w,k as o,a as Z,y as c,C as x,z as O}from"../chunks/index.2b2d73f1.js";import{g as ae}from"../chunks/navigation.9a3e5d8a.js";import{r as ne,t as ie,f as J}from"../chunks/index.01e535c7.js";import{a as se}from"../chunks/index.f4a5b940.js";var X=6e4,G=36e5;function oe(t,e){var r;ne(1,arguments);var a=ie((r=e==null?void 0:e.additionalDigits)!==null&&r!==void 0?r:2);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var n=ce(t),i;if(n.date){var l=fe(n.date,a);i=pe(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var T=i.getTime(),p=0,s;if(n.time&&(p=ve(n.time),isNaN(p)))return new Date(NaN);if(n.timezone){if(s=me(n.timezone),isNaN(s))return new Date(NaN)}else{var v=new Date(T+p),u=new Date(0);return u.setFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()),u.setHours(v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds()),u}return new Date(T+p+s)}var z={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},le=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ue=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,de=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ce(t){var e={},r=t.split(z.dateTimeDelimiter),a;if(r.length>2)return e;if(/:/.test(r[0])?a=r[0]:(e.date=r[0],a=r[1],z.timeZoneDelimiter.test(e.date)&&(e.date=t.split(z.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){var n=z.timezone.exec(a);n?(e.time=a.replace(n[1],""),e.timezone=n[1]):e.time=a}return e}function fe(t,e){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(r);if(!a)return{year:NaN,restDateString:""};var n=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:i===null?n:i*100,restDateString:t.slice((a[1]||a[2]).length)}}function pe(t,e){if(e===null)return new Date(NaN);var r=t.match(le);if(!r)return new Date(NaN);var a=!!r[4],n=E(r[1]),i=E(r[2])-1,l=E(r[3]),T=E(r[4]),p=E(r[5])-1;if(a)return Te(e,T,p)?he(e,T,p):new Date(NaN);var s=new Date(0);return!ge(e,i,l)||!_e(e,n)?new Date(NaN):(s.setUTCFullYear(e,i,Math.max(n,l)),s)}function E(t){return t?parseInt(t):1}function ve(t){var e=t.match(ue);if(!e)return NaN;var r=k(e[1]),a=k(e[2]),n=k(e[3]);return Ne(r,a,n)?r*G+a*X+n*1e3:NaN}function k(t){return t&&parseFloat(t.replace(",","."))||0}function me(t){if(t==="Z")return 0;var e=t.match(de);if(!e)return 0;var r=e[1]==="+"?-1:1,a=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return ye(a,n)?r*(a*G+n*X):NaN}function he(t,e,r){var a=new Date(0);a.setUTCFullYear(t,0,4);var n=a.getUTCDay()||7,i=(e-1)*7+r+1-n;return a.setUTCDate(a.getUTCDate()+i),a}var De=[31,null,31,30,31,30,31,31,30,31,30,31];function K(t){return t%400===0||t%4===0&&t%100!==0}function ge(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(De[e]||(K(t)?29:28))}function _e(t,e){return e>=1&&e<=(K(t)?366:365)}function Te(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function Ne(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function ye(t,e){return e>=0&&e<=59}async function we({params:t}){try{const{id:e}=t;return await fetch(`https://localhost:3000/todos/${e}`).then(a=>a.json())}catch(e){return console.error("Erreur lors de la récupération de la todo par ID :",e),null}}const Se=Object.freeze(Object.defineProperty({__proto__:null,load:we},Symbol.toStringTag,{value:"Module"}));function Ce(t){let e,r="<h1>Modifier la tâche</h1>",a,n,i,l,T="Nom :",p,s,v,u,m,q="Description :",Y,g,A,C,N,H="Date limite :",B,_,F,y,P="Modifier",R,W;return{c(){e=h("div"),e.innerHTML=r,a=I(),n=h("form"),i=h("div"),l=h("label"),l.textContent=T,p=I(),s=h("input"),v=I(),u=h("div"),m=h("label"),m.textContent=q,Y=I(),g=h("textarea"),A=I(),C=h("div"),N=h("label"),N.textContent=H,B=I(),_=h("input"),F=I(),y=h("button"),y.textContent=P,this.h()},l(f){e=D(f,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-tyczw2"&&(e.innerHTML=r),a=b(f),n=D(f,"FORM",{class:!0});var d=U(n);i=D(d,"DIV",{});var M=U(i);l=D(M,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(l)!=="svelte-1cg6vvx"&&(l.textContent=T),p=b(M),s=D(M,"INPUT",{type:!0,id:!0,class:!0}),M.forEach(w),v=b(d),u=D(d,"DIV",{});var S=U(u);m=D(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(m)!=="svelte-dp8wio"&&(m.textContent=q),Y=b(S),g=D(S,"TEXTAREA",{id:!0,rows:!0,class:!0}),U(g).forEach(w),S.forEach(w),A=b(d),C=D(d,"DIV",{});var L=U(C);N=D(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(N)!=="svelte-3be51k"&&(N.textContent=H),B=b(L),_=D(L,"INPUT",{type:!0,id:!0,min:!0,class:!0}),L.forEach(w),F=b(d),y=D(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(y)!=="svelte-rxarpu"&&(y.textContent=P),d.forEach(w),this.h()},h(){o(e,"class","title svelte-1sepej2"),o(l,"for","name"),o(l,"class","svelte-1sepej2"),o(s,"type","text"),o(s,"id","name"),s.required=!0,o(s,"class","svelte-1sepej2"),o(m,"for","description"),o(m,"class","svelte-1sepej2"),o(g,"id","description"),g.required=!0,o(g,"rows","4"),o(g,"class","svelte-1sepej2"),o(N,"for","dateLimite"),o(N,"class","svelte-1sepej2"),o(_,"type","date"),o(_,"id","dateLimite"),o(_,"min",J(se(new Date,1),"yyyy-MM-dd")),_.required=!0,o(_,"class","svelte-1sepej2"),o(y,"type","submit"),o(y,"class","svelte-1sepej2"),o(n,"class","svelte-1sepej2")},m(f,d){Z(f,e,d),Z(f,a,d),Z(f,n,d),c(n,i),c(i,l),c(i,p),c(i,s),x(s,t[1]),c(n,v),c(n,u),c(u,m),c(u,Y),c(u,g),x(g,t[2]),c(n,A),c(n,C),c(C,N),c(C,B),c(C,_),x(_,t[0]),c(n,F),c(n,y),R||(W=[O(s,"input",t[5]),O(g,"input",t[6]),O(_,"input",t[7]),O(n,"submit",t[3])],R=!0)},p(f,[d]){d&2&&s.value!==f[1]&&x(s,f[1]),d&4&&x(g,f[2]),d&1&&x(_,f[0])},i:V,o:V,d(f){f&&(w(e),w(a),w(n)),R=!1,$(W)}}}async function Ie(t,e){try{const r=await fetch(`https://localhost:3000/todos/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw new Error("Erreur lors de la mise à jour de la tâche");return await r}catch(r){throw console.error("Erreur lors de la mise à jour de la tâche :",r),r}}function be(t,e,r){let{data:a}=e,n="";ee(()=>{let u=oe(a.LimitDate);r(0,n=J(u,"yyyy-MM-dd"))});let i=a.Name,l=a.Description;async function T(u){u.preventDefault();try{const m={name:i,description:l,limitDate:n,isDone:a.IsDone};await Ie(a.Id,m),ae("/todo")}catch(m){console.error("Error while updating todo:",m)}}function p(){i=this.value,r(1,i)}function s(){l=this.value,r(2,l)}function v(){n=this.value,r(0,n)}return t.$$set=u=>{"data"in u&&r(4,a=u.data)},[n,i,l,T,a,p,s,v]}class Le extends te{constructor(e){super(),re(this,e,be,Ce,Q,{data:4})}}export{Le as component,Se as universal};
